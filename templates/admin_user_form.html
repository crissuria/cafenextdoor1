{% extends "base.html" %}

{% block title %}{{ action }} User - Admin{% endblock %}

{% block content %}
<div class="page-header">
    <div class="container">
        <h1 class="page-title">{{ action }} Admin User</h1>
        <p class="page-subtitle">Create a new staff or admin account</p>
    </div>
</div>

<div class="admin-section">
    <div class="container">
        <div class="admin-form-container">
            <form method="POST" class="admin-form">
                <div class="form-group">
                    <label for="full_name">Full Name</label>
                    <input type="text" id="full_name" name="full_name" placeholder="e.g., Jane Doe" value="{{ user.full_name if user else '' }}">
                    <small>The person's real name</small>
                </div>

                {% if action == 'Add' %}
                <div class="form-group">
                    <label for="username">Username *</label>
                    <input type="text" id="username" name="username" required placeholder="Enter username">
                </div>
                {% else %}
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" value="{{ user.username }}" disabled>
                    <small>Username cannot be changed</small>
                </div>
                {% endif %}

                <div class="form-group">
                    <label for="password">Password {% if action == 'Add' %}*{% endif %}</label>
                    <input type="password" id="password" name="password" {% if action == 'Add' %}required{% endif %} placeholder="{% if action == 'Edit' %}Leave blank to keep current{% else %}Enter password{% endif %}" minlength="6">
                    <small>Minimum 6 characters</small>
                </div>

                <div class="form-group">
                    <label for="role">Role *</label>
                    <select id="role" name="role" required>
                        <option value="staff" {% if user and user.role == 'staff' %}selected{% endif %}>Staff - Can view orders and messages</option>
                        <option value="manager" {% if user and user.role == 'manager' %}selected{% endif %}>Manager - Can manage menu and promotions</option>
                        <option value="admin" {% if user and user.role == 'admin' %}selected{% endif %}>Admin - Full access</option>
                    </select>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">{{ 'Update User' if action == 'Edit' else 'Create User' }}</button>
                    <a href="{{ url_for('admin_users') }}" class="btn btn-secondary">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

